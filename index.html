<html>

<head>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
  <script src="metamorph.js"></script>

  <script>


    function createHtml(what) {
      var $content = $('#content')
      $content.html('')         
      for (var i=0; i<10000; i++) {
        $content.append(what())
      }   
    }

    function runWithMetamorphs() {
      createHtml(function() {  return Metamorph("<p>test paragraph</p>").outerHTML() })
      $('head').append("<link rel='stylesheet' type='text/css' href='basic.css'>")
    }

    function runWithoutMetamorphs() {
      createHtml(function() { return "<p>test paragraph</p>" })
      $('head').append("<link rel='stylesheet' type='text/css' href='basic.css'>")
    }    

  </script>
</head>

<body>
  <div id='results'></div>

  <button onclick="runWithoutMetamorphs()">Run with metamorphs</button>
  <button onclick="runWithMetamorphs()">Run with metamorphs</button>

  <hr>


  <div id='content'>
  </div>

</body>

</html>